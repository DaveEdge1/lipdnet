extends layout

//- block css will insert css scripts listed in head.jade that are needed on every page.
block css
    //- files below are page specific
    link(rel='stylesheet' href='css/validate.css')
    link(rel="stylesheet" href="css/json-tree.css")
    link(rel="stylesheet" href="lib/ngDiff/angular-object-diff.css")
    link(rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons")
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/angular-busy/4.1.4/angular-busy.min.css")

block body
    body(ng-app='validateApp' ng-cloak)
        #wrapper(ng-controller="ValidateCtrl as vc")
            include ./include/navbar.jade
            md-toolbar
                .md-toolbar-tools
                    .md-title Merge

            .col-sm-12(ng-controller="MergeCtrl as mc" cg-busy="pageMeta.busyPromise")
                include ./pieces/action_btns_merge.jade

                // Progress bar gives indication on what steps are completed and what workflow should be followed.
                .progressbarcontainer
                    ul.progressbar
                        li(ng-class="{active: uploadCount>0}") File 1 : <br/>{{file1.filename}}
                        li(ng-class="{active: uploadCount>1}") File 2 : <br/>{{file2.filename}}
                        li(ng-class="{active: resolveTrigger}") Resolve differences
                        li(ng-class="{active: downloadTrigger}") Download LiPD file


                div
                    // The full diff shows diffs AND the rest of the JSON data too.
                    .col-md-6
                        h3 Full Diff
                        pre(ng-if="uploadCount>=2" ng-bind-html="diffValue")
                        pre(ng-if="uploadCount<2") Upload two files to see differences
                    // Diff resolution pane
                    .col-md-6
                        // How many differences did it find?
                        h3 Diff Count: {{diffCount}}
                        // Give multiple choice resolution options for each field
                        div(ng-repeat="item in diffList")
                            h5 {{item.crumbs.join(" > ")}}
                            // Fields are disabled if delete option is checked. Multiple choice is not active.
                            md-radio-group(ng-model="item.selected")
                                .compareitem
                                    md-radio-button(ng-click="addRmValue(item, 0)" value="item.options[0]") {{item.options[0]}}
                                .compareitem
                                    md-radio-button(ng-click="addRmValue(item, 1)" value="item.options[1]") {{item.options[1]}}
                                .compareitem
                                    md-radio-button(ng-click="addRmValue(item, 3)" value="delete") Delete
                                .compareitem
                                    md-radio-button(ng-click="addRmValue(item, 2)" value="other") Other
                                    input(ng-model="item.options[2]")


//- block js will insert js scripts listed in footer.jade that are needed on every page.
block js
    //- files below are page specific
    script(src='apps/validateApp.js')
    script(src='js/ngValidate.js')
    script(src='js/ngContValidate.js')
    script(src='js/ngContModFile.js')
    script(src='js/ngContModInt.js')
    script(src='js/ngContModAsk.js')
    script(src='js/ngContModAlert.js')
    script(src='js/ngContModBlock.js')
    script(src='js/ngSpreadsheet.js')
    script(src='js/ngMerge.js')
    script(src='js/ngGraphs.js')
    script(src="lib/zip/zip.js")
    script(src="lib/ngDiff/angular-object-diff.min.js")
    script(src='lib/json-tree.js')
    script(src="lib/zip/zip-ext.js")
    script(src="lib/papaparse.min.js")
    script(src="lib/FileSaver.min.js")
    script(src="lib/ngHandsontable/dist/handsontable.full.js")
    script(src="lib/ngHandsontable/dist/ngHandsontable.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.8.1/nv.d3.min.js")
    script(src="lib/angularjs-nvd3-directives.min.js")
    script(src="modules/ng_map.js")
    script(src="modules/ng_create.js")
    script(src="modules/ng_misc.js")
    script(src="modules/ng_versions.js")
    script(src="modules/ng_validator.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.7.0/intro.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/angularjs-toaster/2.1.0/toaster.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/angular-busy/4.1.4/angular-busy.min.js")
    script(src='https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.15/angular-ui-router.min.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/angular-google-maps/2.2.0/angular-google-maps.min.js')
    script(src="https://cdnjs.cloudflare.com/ajax/libs/danialfarid-angular-file-upload/12.2.13/ng-file-upload.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/danialfarid-angular-file-upload/12.2.13/ng-file-upload-shim.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/ngStorage/0.3.6/ngStorage.min.js")
    script(src='https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyA7HRzSi5HhyKTX9Xw7CZ-9XScwq04TZyc')
    script(src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/2.5.0/ui-bootstrap-tpls.min.js")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.5.8/angular-sanitize.min.js")
    script(src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js")